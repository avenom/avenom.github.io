<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        :root {
            --accent-color: #eb5d51;
        }
    </style>

    
    
    
    
    
    

    
    <title>Неудачный опыт использования Home Assistant Voice (Preview Edition)</title>
    <meta name="description" content="Техноблог флегматичного энтузиаста">
    <meta name="keywords" content='блог, Железо, Софт, Умный дом, Homeassistant'>

    <meta property="og:url" content="https://avenom.ru/posts/ha-voice/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Неудачный опыт использования Home Assistant Voice (Preview Edition)">
    <meta property="og:description" content="Техноблог флегматичного энтузиаста">
    <meta property="og:image" content="/posts/ha-voice.png">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Неудачный опыт использования Home Assistant Voice (Preview Edition)">
    <meta name="twitter:description" content="Техноблог флегматичного энтузиаста">
    <meta property="twitter:domain" content="https://avenom.ru/posts/ha-voice/">
    <meta property="twitter:url" content="https://avenom.ru/posts/ha-voice/">
    <meta name="twitter:image" content="/posts/ha-voice.png">

    

    <a rel="me" href="https://mas.to/@avenom">Mastodon</a>

    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="Avenom" />
    <link rel="manifest" href="/site.webmanifest" />

    <link rel="canonical" href="https://avenom.ru/posts/ha-voice/" />

    <link rel="stylesheet" type="text/css" href="https://avenom.ru//css/normalize.min.css" media="print" onload="this.media='all'">
    <link rel="stylesheet" type="text/css" href="https://avenom.ru//css/main.css">
    <link disabled id="dark-theme" rel="stylesheet" href="https://avenom.ru//css/dark.css">

    <script src="https://avenom.ru//js/svg-injector.min.js"></script>
    <script src="https://avenom.ru//js/feather-icons.min.js"></script>
    <script src="https://avenom.ru//js/main.js"></script>

    
    
</head>
<body>
        <script type="text/javascript">
            
            setThemeByUserPref();
        </script><header class="header">
    <nav class="header-nav">

        
        <div class="avatar">
            <a href="https://avenom.ru/">
                <img src="https://avenom.ru/logo.png" alt="Логотип" />
            </a>
        </div>
        

        <div class="nav-title">
            <a class="nav-brand" href="https://avenom.ru/">Синдром одиночки</a>
        </div>

        <div class="nav-links">
            
            <div class="nav-link">
                <a href="https://avenom.ru/posts/"><span data-feather='edit'></span> Посты </a>
            </div>
            
            <div class="nav-link">
                <a href="https://avenom.ru/posts/projects/"><span data-feather='settings'></span> Проекты </a>
            </div>
            
            <div class="nav-link">
                <a href="https://avenom.ru/tags/"><span data-feather='tag'></span> Теги </a>
            </div>
            
            <div class="nav-link">
                <a href="https://avenom.ru/posts/donate/"><span data-feather='credit-card'></span> Донат </a>
            </div>
            
            <div class="nav-link">
                <a href="https://avenom.ru/index.xml"><span data-feather='rss'></span>  </a>
            </div>
            

            <span class="nav-icons-divider"></span>
            <div class="nav-link dark-theme-toggle">
                <a>
                    <span id="theme-toggle-icon" data-feather="moon"></span>
                </a>
            </div>

            <div class="nav-link" id="hamburger-menu-toggle">
                <a>
                    <span data-feather="menu"></span>
                </a>
            </div>

            
            <ul class="nav-hamburger-list visibility-hidden">
                
                <li class="nav-item">
                    <a href="https://avenom.ru/posts/"><span data-feather='edit'></span> Посты </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://avenom.ru/posts/projects/"><span data-feather='settings'></span> Проекты </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://avenom.ru/tags/"><span data-feather='tag'></span> Теги </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://avenom.ru/posts/donate/"><span data-feather='credit-card'></span> Донат </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://avenom.ru/index.xml"><span data-feather='rss'></span>  </a>
                </li>
                
                <li class="nav-item dark-theme-toggle">
                    <a>
                        <span id="theme-toggle-icon" data-feather="moon"></span>
                    </a>
                </li>
            </ul>

        </div>
    </nav>
</header>
<main id="content">
    <div class="post container">

    <div class="post-header-section">
        <h1>Неудачный опыт использования Home Assistant Voice (Preview Edition)</h1>
        <small role="doc-subtitle"></small>

    <div class="post-content">
        <p>
            <p><a href="/posts/ha-voice.png"><img src="/posts/ha-voice.png" alt="Шапка поста с устройством Home Assistant Voice Preview Edition" title="Шапка поста с устройством Home Assistant Voice Preview Edition"></a></p>
<p>Мне всегда нравилась идея локального голосового управления умным домом без привязки к внешним облачным сервисам, но эксперимент по использованию локального голосового помощника <a href="https://www.home-assistant.io/voice-pe">Home Assistant Voice (Preview Edition)</a> в Home Assistant, запущенном в докере на NAS Synology DS224+ с древним процессором Intel Celeron J4125, признаю неудачным и провалившимся.</p>
<p>Все не заладилось еще на этапе заказа колонки у дешевого китайца. Продавец отправил колонку с использованным трекинг-номером и обозначил ее в декларации как «плату для самодельного робота» по цене тарелки лапши. Китайский товарищ заверил, что все будет в порядке, а я, наивный и экономный, решил поверить. Вскоре трекинг-номер обновился и я получил колонку в срок в неказистой картонной коробке. Все-таки это хоть и официальная колонка, но внутри полный DIY на базе ESPHome с соответствующей нулевой презентацией.</p>
<p>Колонка работает по Wi-Fi и питается от обычного USB-C-кабеля. Кабель нужен исключительно для подачи питания, нет необходимости подключать колонку к серверу, где установлен Home Assistant. Я вообще подключил к роутеру Keenetic, чтобы колонка бодрствовала 24/7.</p>
<p>С подключением через мобильное приложение Home Assistant не возникло никаких проблем, а вот фраза активации «Okay Nabu» у меня срабатывала через раз. Закосить под Тони Старка с другой фразой «Hey Jarvis» тоже не вышло. Зато с фразой «Hey Mycroft» произошло стопроцентное взаимопонимание между человеком и бездушной машиной.</p>
<p>В качестве теста использовались умные лампочки Яндекса с протоколом Matter over Wi-Fi, подключенных напрямую к Home Assistant. Замерял отклик на фразу включения света на русском. Малая локальная модель tiny-int8 для STT-движка (speech-to-text) <a href="https://hub.docker.com/r/rhasspy/wyoming-whisper">Faster Whisper</a> выполняет команды примерно за 4 секунды. Попробовал другую малую модель vosk-model-small-ru-0.22 для STT-движка <a href="https://github.com/dekiesel/wyoming-vosk-standalone">Vosk</a> - 2 секунды. Вроде отличный результат, но главная проблема локальных моделей в распознавании слов. Говорил громко и отчетливо, а в режиме отладки видно, что слова распознаются криво и через раз. Пробовал ставить большую модель vosk-model-ru-0.42, которая жрет 6 гигов оперативной памяти, но никакого заметного улучшения не увидел.</p>
<p>С облачным <a href="https://www.nabucasa.com/">Home Assistant Cloud</a> нет никаких проблем с распознаванием слов и русский там работает отлично, но облако требует подписки за $10 в месяц. В то время как в Home Assistant с помощью сторонней интеграции можно подключить любую Яндекс Станцию, которая будет прекрасно работать без какой-либо подписки. У меня в Home Assistant более сотни голосовых команд, которые Яндекс Станция понимает и распознает с первого раза. Недавно разработчики Home Assistant представили новый STT-движок <a href="https://github.com/OHF-Voice/speech-to-phrase">Speech-to-Phrase</a>, который должен работать на любой картошке, но там пока нет поддержки русского языка.</p>
<p>В текущей предварительной версии Home Assistant Voice – это скорее игрушка для энтузиастов, готовых мириться с регулярными ошибками распознавания. Использую исключительно в качестве резервного локального голосового помощника. Можно еще подключить к обычным колонкам через 3,5-мм аудиовыход и использовать в <a href="https://www.music-assistant.io/">Music Assistant</a>, который агрегирует в одном месте локальные и стриминговые фонотеки. Других сценариев использования я пока не вижу.</p>

        </p>
	
     <p class="post-date">
            Опубликовано: 6 мая, 2025
     </p>			
				
	<ul class="post-tags">
        
            <li class="post-tag"><a href="https://avenom.ru/tags/%D0%B6%D0%B5%D0%BB%D0%B5%D0%B7%D0%BE">Железо</a></li>
        
            <li class="post-tag"><a href="https://avenom.ru/tags/%D1%81%D0%BE%D1%84%D1%82">Софт</a></li>
        
            <li class="post-tag"><a href="https://avenom.ru/tags/%D1%83%D0%BC%D0%BD%D1%8B%D0%B9-%D0%B4%D0%BE%D0%BC">Умный дом</a></li>
        
            <li class="post-tag"><a href="https://avenom.ru/tags/homeassistant">Homeassistant</a></li>
        
        </ul>
		
    </div>
    </div>
</div>



    

        </main><footer class="footer">
    <span>&copy; 2025 Avenom</span>
    <span>
        Сделано в <a target="_blank" href="https://gohugo.io">Hugo</a> | <a target="_blank" href="https://github.com/526avijitgupta/gokarna">Gokarna</a>
    </span>
</footer>
</body>
</html>

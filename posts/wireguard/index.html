<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        :root {
            --accent-color: #FFC107;
        }
    </style>

    
    
    
    
    
    

    
    <title>Установка WireGuard VPN на VPS-хостинг</title>
    <meta name="description" content="">
    <meta name="keywords" content='блог, Проекты, VPN, VPS, WireGuard, Гайды'>

    <meta property="og:url" content="https://avenom.ru/posts/wireguard/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Установка WireGuard VPN на VPS-хостинг">
    <meta property="og:description" content="">
    <meta property="og:image" content="/posts/wireguard-01.png">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Установка WireGuard VPN на VPS-хостинг">
    <meta name="twitter:description" content="">
    <meta property="twitter:domain" content="https://avenom.ru/posts/wireguard/">
    <meta property="twitter:url" content="https://avenom.ru/posts/wireguard/">
    <meta name="twitter:image" content="/posts/wireguard-01.png">

    

    <link rel="canonical" href="https://avenom.ru/posts/wireguard/" />

    <link rel="stylesheet" type="text/css" href="https://avenom.ru//css/normalize.min.css" media="print" onload="this.media='all'">
    <link rel="stylesheet" type="text/css" href="https://avenom.ru//css/main.css">
    <link disabled id="dark-theme" rel="stylesheet" href="https://avenom.ru//css/dark.css">

    <script src="https://avenom.ru//js/svg-injector.min.js"></script>
    <script src="https://avenom.ru//js/feather-icons.min.js"></script>
    <script src="https://avenom.ru//js/main.js"></script>

    
    
</head>
<body>
        <script type="text/javascript">
            
            setThemeByUserPref();
        </script><header class="header">
    <nav class="header-nav">

        
        <div class="avatar">
            <a href="https://avenom.ru/">
                <img src="https://avenom.ru/logo.png" alt="avatar" />
            </a>
        </div>
        

        <div class="nav-title">
            <a class="nav-brand" href="https://avenom.ru/">Avenom</a>
        </div>

        <div class="nav-links">
            
            <div class="nav-link">
                <a href="https://avenom.ru/posts/"><span data-feather='edit'></span> Посты </a>
            </div>
            
            <div class="nav-link">
                <a href="https://avenom.ru/posts/projects/"><span data-feather='settings'></span> Проекты </a>
            </div>
            
            <div class="nav-link">
                <a href="https://avenom.ru/tags/"><span data-feather='tag'></span> Теги </a>
            </div>
            
            <div class="nav-link">
                <a href="https://avenom.ru/posts/donate/"><span data-feather='credit-card'></span>  </a>
            </div>
            
            <div class="nav-link">
                <a href="https://avenom.ru/index.xml"><span data-feather='rss'></span>  </a>
            </div>
            

            <span class="nav-icons-divider"></span>
            <div class="nav-link dark-theme-toggle">
                <a>
                    <span id="theme-toggle-icon" data-feather="moon"></span>
                </a>
            </div>

            <div class="nav-link" id="hamburger-menu-toggle">
                <a>
                    <span data-feather="menu"></span>
                </a>
            </div>

            
            <ul class="nav-hamburger-list visibility-hidden">
                
                <li class="nav-item">
                    <a href="https://avenom.ru/posts/"><span data-feather='edit'></span> Посты </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://avenom.ru/posts/projects/"><span data-feather='settings'></span> Проекты </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://avenom.ru/tags/"><span data-feather='tag'></span> Теги </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://avenom.ru/posts/donate/"><span data-feather='credit-card'></span>  </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://avenom.ru/index.xml"><span data-feather='rss'></span>  </a>
                </li>
                
                <li class="nav-item dark-theme-toggle">
                    <a>
                        <span id="theme-toggle-icon" data-feather="moon"></span>
                    </a>
                </li>
            </ul>

        </div>
    </nav>
</header>
<main id="content">
    <div class="post container">

    <div class="post-header-section">
        <h1>Установка WireGuard VPN на VPS-хостинг</h1>
        <small role="doc-subtitle"></small>

    <div class="post-content">
        <p>
            <p><a href="/posts/wireguard-01.png"><img src="/posts/wireguard-01.png" alt=""></a></p>
<p><a href="https://wireguard.com/">WireGuard</a> – самый актуальный и быстрый VPN-протокол на сегодняшний день. Обеспечивает максимальную скорость работы и надежную криптографическую защиту.</p>
<h2 id="1-vps-хостинг-и-клиенты">1. VPS-хостинг и клиенты</h2>
<p>VPS-хостинг желательно выбирать в Европе, но сейчас оплатить его уже будет проблематично. Можно подобрать хостинг на сайтах <a href="https://vps.today/">VPS.today</a> и <a href="https://ru.hostings.info/">Hostings.info</a> в России с серверами в Европе (например в Нидерландах), главное выбрать сервер с <strong>KVM-виртуализацией</strong> и наличием канала минимум 100 Мбит/с с безлимитным трафиком или с его приличным объемом.</p>
<p>На этапе выбора ОС для сервера выбираем <strong>Ubuntu 18.04</strong>. На поднятие сервера нужно время, после чего приходит письмо из которого нам нужно три пункта: IP-адрес сервера, имя пользователя (root), пароль.</p>
<p>Заранее установите необходимые вам клиенты WireGuard: <a href="https://download.wireguard.com/windows-client/wireguard-installer.exe">Windows</a>, <a href="https://itunes.apple.com/us/app/wireguard/id1451685025?ls=1&amp;mt=12">macOS</a>, <a href="https://play.google.com/store/apps/details?id=com.wireguard.android">Android</a>, <a href="https://itunes.apple.com/us/app/wireguard/id1441195209?ls=1&amp;mt=8">iOS</a>.</p>
<h2 id="2-подключение-к-серверу">2. Подключение к серверу</h2>
<p>Для удобства будем использовать кроссплатформенный SSH-клиент <a href="https://hyper.is/#installation">Hyper</a>.</p>
<ol>
<li>Подключаемся к серверу с вашим IP-адресом и именем пользователя следующей командой:</li>
</ol>
<pre tabindex="0"><code>ssh root@IP
</code></pre><ol start="2">
<li>Пишем yes, затем вводим пароль от вашего сервера (не отображается при вводе, но можно вставить из буфера обмена):</li>
</ol>
<pre tabindex="0"><code>пароль
</code></pre><ol start="3">
<li>После подключения к серверу проверяем ОС на наличие обновлений:</li>
</ol>
<pre tabindex="0"><code>apt-get update &amp;&amp; apt-get upgrade
</code></pre><h2 id="3-установка-сервера-wireguard">3. Установка сервера WireGuard</h2>
<p>Существует автоматический способ установки сервера при помощи клиента <a href="/posts/amnezia/">Amnezia VPN</a>, но в этом гайде мы будем использовать скрипт <strong>WireGuard installer</strong> от <strong>angristan</strong>.</p>
<ol>
<li>Сначала установим инструмент curl:</li>
</ol>
<pre tabindex="0"><code>apt install curl -y
</code></pre><ol start="2">
<li>Затем запустим скачивание скрипта установки:</li>
</ol>
<pre tabindex="0"><code>curl -O https://raw.githubusercontent.com/angristan/wireguard-install/master/wireguard-install.sh
chmod +x wireguard-install.sh
./wireguard-install.sh
</code></pre><ol start="3">
<li>Появится строка ./wireguard-install.sh, жмем Enter.</li>
</ol>
<p><a href="/posts/wireguard-02.png"><img src="/posts/wireguard-02.png" alt=""></a></p>
<ol start="4">
<li>Отвечаем на все вопросы утвердительно, попросит нажать любую клавишу для начала установки, затем попросит ввести имя клиента (<strong>Client name</strong>) пишем <strong>wireguard</strong>, соглашаемся с предложенными IP-адресами.</li>
</ol>
<p><a href="/posts/wireguard-03.png"><img src="/posts/wireguard-03.png" alt=""></a></p>
<p>После чего будет отображен QR-код.</p>
<p><a href="/posts/wireguard-04.png"><img src="/posts/wireguard-04.png" alt=""></a></p>
<p>Далее определимся с клиентом WireGuard:</p>
<ol>
<li>Для смартфонов открываем мобильный клиент WireGuard, выбираем «<strong>Создать из QR-кода</strong>» и пробуем подключиться к VPN.</li>
</ol>
<p><a href="/posts/wireguard-05.gif"><img src="/posts/wireguard-05.gif" alt=""></a></p>
<ol start="2">
<li>Для компьютеров открываем конфигурационный файл командой:</li>
</ol>
<pre tabindex="0"><code>nano ./wg0-client-wireguard.conf
</code></pre><p>Затем копируем весь текст в любой текстовой редактор и сохраняем файл с именем <strong>wg0-client-wireguard.conf</strong> и импортируем в клиенте WireGuard.</p>
<h2 id="4-добавление-других-клиентов">4. Добавление других клиентов</h2>
<p>Для каждого отдельного клиента нужно генерировать отдельный конфигурационный файл.</p>
<ol>
<li>Для этого мы повторно запускаем скрипт установки:</li>
</ol>
<pre tabindex="0"><code>bash ./wireguard-install.sh
</code></pre><p><a href="/posts/wireguard-06.png"><img src="/posts/wireguard-06.png" alt=""></a></p>
<ol start="2">
<li>Выбираем 1-й пункт «<strong>Add a new user</strong>», далее пишем имя например для клиента в Windows <strong>wireguard-win</strong> (не более 15 символов), соглашаемся с предложенными IP-адресами. Появится QR-код, а под ним путь к конфигурационному файлу. Открываем содержимое файла следующей командой:</li>
</ol>
<pre tabindex="0"><code>nano ./wg0-client-wireguard-win.conf
</code></pre><p>Затем копируем весь текст в любой текстовой редактор и сохраняем файл с именем <strong>wg0-client-wireguard-win.conf</strong> и импортируем в клиенте WireGuard.</p>
<h2 id="5-подключение-к-wireguard">5. Подключение к WireGuard</h2>
<p>По умолчанию прописывается DNS-сервер от AdGuard, с ним тоже все работает и открывается. При желании можно отредактировать соединение в клиенте и вручную прописать DNS-сервер 1.1.1.1 от Cloudflare, который не стал блокировать доступ из России.</p>
<p>Подключение с мобильного устройства самое простое. После сканирования QR-кода, создается соединение к вашему серверу и вам остается только к нему подключиться.</p>
<p>Для клиента WireGuard для Windows, нажимаем «<strong>Добавить туннель</strong>» и выбираем скопированный ранее конфигурационный файл <strong>wg0-client-wireguard-win.conf</strong> и пробуем подключиться.</p>
<p>Заходим <a href="https://whatismyipaddress.com/">сюда</a> и видим IP-адрес и страну вашего сервера.</p>
<p>Проверяем доступ к заблокированным <a href="https://twitter.com/">сайтам</a> и замеряем <a href="https://speedcheck.org/ru/">скорость</a>.</p>
<h2 id="6-настройка-и-подключение-в-роутерах-keenetic">6. Настройка и подключение в роутерах Keenetic</h2>
<p>В роутерах Keenetic можно установить компонент WireGuard и пустить весь трафик по VPN.</p>
<ol>
<li>
<p>Переходим в админке роутера в «<strong>Управление</strong>» &gt; «<strong>Общие настройки</strong>» &gt; «<strong>Изменить набор компонентов</strong>», ищем «<strong>Сетевые функции</strong>», выбираем «<strong>Wireguard VPN</strong>» и жмем «<strong>Установить обновление</strong>».</p>
</li>
<li>
<p>Далее переходим в «<strong>Интернет</strong>» &gt; «<strong>Другие подключения</strong>» &gt; «<strong>Wireguard</strong>» &gt; «<strong>Загрузить из файла</strong>» и выбираем сохраненный файл .conf.</p>
</li>
<li>
<p>Отредактируем соединение, отмечаем «<strong>Использовать для выхода в интернет</strong>» и оставляем DNS-серверы от AdGuard или прописываем в «<strong>DNS 1</strong>»: 1.1.1.1 и «<strong>DNS 2</strong>»: 1.0.0.1 от Cloudflare.</p>
</li>
<li>
<p>Переходим в «<strong>Интернет</strong>» &gt; «<strong>Приоритеты подключений</strong>» и переносим соединение Wireguard над всеми другими подключениями и нажимаем «<strong>Сохранить</strong>», затем переходим в «<strong>Другие подключения</strong>» и пробуем подключиться к VPN.</p>
</li>
</ol>

        </p>
	
     <p class="post-date">
            Опубликовано: 12 марта, 2022
     </p>			
				
	<ul class="post-tags">
        
            <li class="post-tag"><a href="https://avenom.ru/tags/%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D1%8B">Проекты</a></li>
        
            <li class="post-tag"><a href="https://avenom.ru/tags/vpn">VPN</a></li>
        
            <li class="post-tag"><a href="https://avenom.ru/tags/vps">VPS</a></li>
        
            <li class="post-tag"><a href="https://avenom.ru/tags/wireguard">WireGuard</a></li>
        
            <li class="post-tag"><a href="https://avenom.ru/tags/%D0%B3%D0%B0%D0%B9%D0%B4%D1%8B">Гайды</a></li>
        
        </ul>
		
    </div>
    </div>
</div>



    

        </main><footer class="footer">
    <span>&copy; 2022 Avenom</span>
    <span>
        Сделано в <a target="_blank" href="https://gohugo.io">Hugo</a> | <a target="_blank" href="https://github.com/526avijitgupta/gokarna">Gokarna</a>
    </span>
</footer>
</body>
</html>
